{"version":3,"sources":["survey.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"survey.js","sourcesContent":["new Vue({\n    el: \"#create-survey\",\n    data: {\n        survey: {\n            title: '',\n            description: '',\n            instructions: '',\n            question_set_id: null,\n            schedule_id: null,\n            faculty_id: null,\n            start_date: null,\n            expires: null,\n            per_page: 10\n        },\n        questionSets: [],\n        faculties: [],\n        schedules: [],\n        errors: [],\n        subjDetails: {\n            DAYS: '',\n            TIME: '',\n            ROOM: '',\n            SECTION: '',\n            COURSE: ''\n        }\n    },\n    methods: {\n        fetchQuestionSet: function(){\n            this.$http.get(config.BASE+'/questionSetList', function(questionSets){\n                this.questionSets = questionSets;\n            });\n        },\n        fetchFaculties: function(){\n            this.$http.get(config.BASE+'/facultyList', function(faculties){\n                this.faculties = faculties;\n            });\n        },\n        fetchSchedules: function(faculty){\n            this.$http.get(config.BASE+'/scheduleList/'+faculty, function(schedules){\n                this.schedules = schedules;\n            });\n        },\n        fetchSubjectDetails: function(schedule){\n            this.$http.get(config.BASE+'/subjectDetails/'+schedule, function(subject){\n                this.subjDetails = subject;\n            });\n        },\n        createSurvey: function(e){\n            e.preventDefault();\n            var survey = this.survey;\n            this.$http.post(config.BASE+'/surveys', survey).success(function(data, status, request){\n                window.location.replace(data.url);\n            })\n            .error(function(data, status, request){\n            this.errors = [];\n            var errors = $.parseJSON(request.response);\n                for(var key in errors){\n                    this.errors.push(errors[key][0]);\n                }\n            $('html, body').animate({ scrollTop: 0 }, 'fast');\n            });\n        },\n        subjectDetails: function(){\n            var self = this;\n\n            this.$watch('survey.faculty_id', function(newVal, oldVal){\n                if(self.survey.schedule_id !== null)\n                {\n                    $(\"#schedule_id\").select2('val', null);\n                    self.survey.schedule_id = '';\n                }\n\n                self.fetchSchedules(newVal);\n            });\n\n            this.$watch('survey.schedule_id', function(newVal, oldVal){\n                if(newVal !== '')\n                    self.fetchSubjectDetails(newVal);\n            });\n        }\n    },\n    ready: function(){\n        this.fetchQuestionSet();\n        this.fetchFaculties();\n        var self = this;\n        this.subjectDetails();\n\n        var e = document.createEvent('HTMLEvents')\n        e.initEvent('change', true, true)\n\n        $(this.$el)\n            .find('select')\n            .select2({theme: \"bootstrap\"})\n            .on('change', function() {\n                this.dispatchEvent(e)\n            });\n    }\n});"],"sourceRoot":"/source/"}